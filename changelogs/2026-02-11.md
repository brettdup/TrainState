ğŸ—“ 2026-02-11 Â· 23:22 (GMT+2)

ğŸ”¹ Request

User requested the exercise editor to use number pickers for set count and per-set reps/weight, removing the old global reps/weight editing flow.

ğŸ”§ Changes Made
	â€¢	Refactored `ExerciseEditorSheetView` to replace metric cards with a single `Sets` number picker.
	â€¢	Added per-set reps and weight editing buttons that open number pickers for each individual set.
	â€¢	Removed template text-field entry for reps/weight and old global reps/weight controls.
	â€¢	Kept set completion toggles available only in workout mode; template mode now remains planning-only.
	â€¢	Updated set synchronization so changing set count only resizes the set list and does not overwrite custom per-set values.
	â€¢	Ensured legacy summary fields (`reps`, `weight`) stay synced from the first set for compatibility.

Files modified:
	â€¢	TrainState/Views/Components/ExerciseEditorSheetView.swift
	â€¢	changelogs/2026-02-11.md

âœ… Result

Exercise editing now follows a plan-first flow: choose number of sets, then configure reps/weight per set using numeric pickers, with no old global reps/weight editing path.

â¸»

ğŸ—“ 2026-02-11 Â· 23:02 (GMT+2)

ğŸ”¹ Request

User indicated `WorkoutDetailView`â€™s exercise sets/reps presentation was not good when per-set values differ.

ğŸ”§ Changes Made
	â€¢	Updated exercise rows in `WorkoutDetailView` to render saved per-set lines (from exercise notes) directly when available.
	â€¢	Adjusted stat chips to show `Per-set details` for variable per-set logs instead of only flattened reps/weight summaries.
	â€¢	Added fallback display for non-set exercise notes so contextual notes remain visible.

Files modified:
	â€¢	TrainState/Views/WorkoutDetailView.swift
	â€¢	changelogs/2026-02-11.md

âœ… Result

Workout details now present per-set variability clearly, reducing confusion when reps/weight differ between sets.

â¸»

ğŸ—“ 2026-02-11 Â· 22:46 (GMT+2)

ğŸ”¹ Request

User requested per-set customization in templates (e.g., 4 sets with individual reps/weights per set).

ğŸ”§ Changes Made
	â€¢	Added persistent per-set plan storage to template exercises via `setPlanJSON` on `StrengthWorkoutTemplateExercise`.
	â€¢	Added shared encode/decode helpers for template set plans (`TemplateSetPlanEntry`).
	â€¢	Updated template apply flow to use stored per-set plans when present.
	â€¢	Updated template editor save/load mapping to persist and restore per-set reps/weight plans.
	â€¢	Enhanced `ExerciseEditorSheetView` template mode with a dedicated `Set Plan` section:
	â€¢	Edit reps/weight per set individually
	â€¢	Add/remove sets directly
	â€¢	Keep summary `sets/reps/weight` synchronized from the set plan
	â€¢	Updated iCloud backup export/import for template exercises to include per-set plan payload (`setPlanJSON`).

Files modified:
	â€¢	TrainState/Models/StrengthWorkoutTemplate.swift
	â€¢	TrainState/Models/Workout.swift
	â€¢	TrainState/Views/AddWorkoutView.swift
	â€¢	TrainState/Views/StrengthTemplatesManagementView.swift
	â€¢	TrainState/Views/Components/ExerciseEditorSheetView.swift
	â€¢	TrainState/Managers/CloudKitManager.swift
	â€¢	changelogs/2026-02-11.md

âœ… Result

Templates now support true per-set programming, so each set can have custom reps/weight and those plans are retained when saving, reusing, and backing up templates.

â¸»

ğŸ—“ 2026-02-11 Â· 22:31 (GMT+2)

ğŸ”¹ Request

User reported template creation was not updating sets/reps/weight correctly and that set checkboxes should not appear while creating templates.

ğŸ”§ Changes Made
	â€¢	Added editor modes to `ExerciseEditorSheetView` (`workout` vs `template`) so template editing uses setup-only behavior.
	â€¢	Disabled plan checkoff UI in template mode; set completion remains available only during actual workout usage.
	â€¢	Updated template editor (`StrengthTemplateEditorView`) to open `ExerciseEditorSheetView` in `.template` mode.
	â€¢	Changed template load/persist mapping to use direct `sets/reps/weight` values (not per-set completion-derived effective values).
	â€¢	Adjusted metric synchronization in workout mode so reps/weight updates propagate to planned set rows consistently.

Files modified:
	â€¢	TrainState/Views/Components/ExerciseEditorSheetView.swift
	â€¢	TrainState/Views/StrengthTemplatesManagementView.swift
	â€¢	changelogs/2026-02-11.md

âœ… Result

Template setup now behaves correctly as planning input (sets/reps/weight persist accurately), and checkboxes only appear when executing a workout plan.

â¸»

ğŸ—“ 2026-02-11 Â· 22:17 (GMT+2)

ğŸ”¹ Request

User requested navigation into each exercise with history, PB graphs, and relevant progression details.

ğŸ”§ Changes Made
	â€¢	Added a new `ExerciseInsightsView` with per-exercise analytics.
	â€¢	Implemented per-exercise history aggregation across workouts (optionally scoped by subcategory link).
	â€¢	Added charted progression metrics using `Charts`:
	â€¢	Top Set over time
	â€¢	Estimated 1RM over time
	â€¢	Volume over time
	â€¢	Added summary metrics (best top set, best estimated 1RM, sessions logged, last trained) and session-by-session history rows.
	â€¢	Updated `WorkoutDetailView` exercise rows to navigate into `ExerciseInsightsView` when tapped.

Files modified:
	â€¢	TrainState/Views/ExerciseInsightsView.swift
	â€¢	TrainState/Views/WorkoutDetailView.swift
	â€¢	changelogs/2026-02-11.md

âœ… Result

Users can now drill into any logged exercise from workout details to view historical performance trends, PB progression charts, and contextual recent history.

â¸»

ğŸ—“ 2026-02-11 Â· 22:01 (GMT+2)

ğŸ”¹ Request

User requested templates to use only a single main category (e.g., `Strength Training`) instead of being tied to a specific detailed category object.

ğŸ”§ Changes Made
	â€¢	Refactored `StrengthWorkoutTemplate` to store `mainCategoryRawValue` (workout-type level) and removed dependency on per-template `WorkoutCategory` linkage.
	â€¢	Updated template save/apply flows (`AddWorkoutView`, `WorkoutDetailView`) to persist/read `mainCategoryRawValue`.
	â€¢	Updated template management UI to show main category text and removed per-template category picker complexity.
	â€¢	Adjusted template subcategory filtering to follow main category/workout type instead of a specific category ID.
	â€¢	Updated iCloud backup export/import models and restore logic to include `mainCategoryRawValue` for strength templates.

Files modified:
	â€¢	TrainState/Models/StrengthWorkoutTemplate.swift
	â€¢	TrainState/Models/Workout.swift
	â€¢	TrainState/Views/AddWorkoutView.swift
	â€¢	TrainState/Views/WorkoutDetailView.swift
	â€¢	TrainState/Views/StrengthTemplatesManagementView.swift
	â€¢	TrainState/Managers/CloudKitManager.swift
	â€¢	changelogs/2026-02-11.md

âœ… Result

Templates now carry a single main category (like `Strength Training`), keeping behavior simpler and aligned with the requested workflow.

â¸»

ğŸ—“ 2026-02-11 Â· 21:44 (GMT+2)

ğŸ”¹ Request

User requested iCloud backup coverage for the new strength template system.

ğŸ”§ Changes Made
	â€¢	Extended backup payload schema with `strengthTemplates` data.
	â€¢	Added codable export models for strength templates and template exercises.
	â€¢	Updated backup export to include persisted `StrengthWorkoutTemplate` records.
	â€¢	Updated legacy asset backup format to write/read a `strengthTemplates` attachment when supported.
	â€¢	Added fallback handling for CloudKit schemas that do not yet allow the `strengthTemplates` field.
	â€¢	Updated restore flow to recreate strength templates, linked category IDs, and template exercise lines.
	â€¢	Updated restore cleanup to clear existing strength templates before import.

Files modified:
	â€¢	TrainState/Models/Workout.swift
	â€¢	TrainState/Managers/CloudKitManager.swift
	â€¢	changelogs/2026-02-11.md

âœ… Result

iCloud backup/restore now includes strength workout templates and their exercise plans in addition to existing workout/category/subcategory/template backup data.

â¸»

ğŸ—“ 2026-02-11 Â· 21:31 (GMT+2)

ğŸ”¹ Request

User requested that every template must carry its category so category/subcategory filtering works correctly.

ğŸ”§ Changes Made
	â€¢	Extended `StrengthWorkoutTemplate` with an explicit `category` relationship to `WorkoutCategory`.
	â€¢	Updated template save flows (`AddWorkoutView` and `WorkoutDetailView`) to persist the template category based on workout/category context.
	â€¢	Updated template application in `AddWorkoutView` to apply the templateâ€™s category and derived subcategories into current workout selection.
	â€¢	Updated `StrengthTemplateEditorView` to include template category selection and to filter available subcategories/exercise options by that selected category.
	â€¢	Updated template list subtitles to show template category for quick verification.

Files modified:
	â€¢	TrainState/Models/StrengthWorkoutTemplate.swift
	â€¢	TrainState/Views/AddWorkoutView.swift
	â€¢	TrainState/Views/WorkoutDetailView.swift
	â€¢	TrainState/Views/StrengthTemplatesManagementView.swift
	â€¢	changelogs/2026-02-11.md

âœ… Result

Templates are now category-scoped, and applying/editing templates automatically respects category-based filtering.

â¸»

ğŸ—“ 2026-02-11 Â· 21:19 (GMT+2)

ğŸ”¹ Request

User requested the template process to be the same as the normal add-exercise process.

ğŸ”§ Changes Made
	â€¢	Refactored `StrengthTemplateEditorView` to use `ExerciseEditorSheetView`, matching the exact exercise add/edit flow used in workout creation.
	â€¢	Replaced custom template exercise inline fields with tap-to-edit exercise rows and the same add-exercise entry point.
	â€¢	Mapped template exercises to `ExerciseLogEntry` for editing and persisted back to template models after edits/deletes.
	â€¢	Kept template name editing in place while aligning exercise editing interactions to the standard workflow.

Files modified:
	â€¢	TrainState/Views/StrengthTemplatesManagementView.swift
	â€¢	changelogs/2026-02-11.md

âœ… Result

Template exercise editing now follows the same interaction model as adding exercises in workouts, reducing context switching and improving consistency.

â¸»

ğŸ—“ 2026-02-11 Â· 21:07 (GMT+2)

ğŸ”¹ Request

User said the overall template + plan flow was not great and requested it to be improved.

ğŸ”§ Changes Made
	â€¢	Redesigned `Strength Templates` card in `AddWorkoutView` to support one-tap quick start from the 3 most recent templates.
	â€¢	Added active plan state and progress summary (`completed sets / planned sets`) directly in the template card.
	â€¢	Added in-list plan execution in workout drafting: each exercise row now has a quick action to mark the next planned set done (or reset when complete), reducing sheet-navigation friction.
	â€¢	Added a direct `Manage` link from the template picker sheet to the dedicated template management page so users can edit templates without backing out to Settings.
	â€¢	Cleared active template context automatically when switching away from strength workouts to keep state predictable.

Files modified:
	â€¢	TrainState/Views/AddWorkoutView.swift
	â€¢	changelogs/2026-02-11.md

âœ… Result

The template workflow now behaves more like an actionable plan flow: pick template quickly, track progress immediately, and complete sets with fewer taps.

â¸»

ğŸ—“ 2026-02-11 Â· 20:49 (GMT+2)

ğŸ”¹ Request

User requested template-based workouts to behave like a plan: keep planned sets and allow checking sets as done.

ğŸ”§ Changes Made
	â€¢	Extended `ExerciseSetEntry` with completion state so each set can be marked done.
	â€¢	Updated template-apply flow in `AddWorkoutView` to prebuild per-set plan rows from template sets/reps/weight.
	â€¢	Added set checkoff UI in manual exercise editing (`ExerciseEditorSheetView`) with per-set completion tracking and progress count.
	â€¢	Added set checkoff UI in live exercise logging (`LiveExerciseLoggerSheetView`) with completion progress.
	â€¢	Updated set summary lines so saved workout notes include whether each set was completed.

Files modified:
	â€¢	TrainState/Models/ExerciseLogEntry.swift
	â€¢	TrainState/Views/AddWorkoutView.swift
	â€¢	TrainState/Views/Components/ExerciseEditorSheetView.swift
	â€¢	TrainState/Views/Components/LiveExerciseLoggerSheetView.swift
	â€¢	changelogs/2026-02-11.md

âœ… Result

Template-based workouts now function as a checkable plan: planned sets are preloaded and users can mark each set complete while training.

â¸»

ğŸ—“ 2026-02-11 Â· 20:36 (GMT+2)

ğŸ”¹ Request

User requested a dedicated page to edit strength templates and the ability to save previous workouts as templates.

ğŸ”§ Changes Made
	â€¢	Added a new `StrengthTemplatesManagementView` with template list, creation, deletion, and per-template exercise editing.
	â€¢	Added full template exercise editing controls: rename, sets/reps/weight updates, subcategory assignment, add/remove exercises, and move up/down ordering.
	â€¢	Linked the new template management page from Settings under Data as `Manage Strength Templates`.
	â€¢	Added `Save as Template` action in `WorkoutDetailView` for previous strength workouts with name prompt and overwrite-by-name behavior.
	â€¢	Updated previews and model containers where needed to include strength template models.

Files modified:
	â€¢	TrainState/Views/StrengthTemplatesManagementView.swift
	â€¢	TrainState/Views/SettingsView.swift
	â€¢	TrainState/Views/WorkoutDetailView.swift
	â€¢	changelogs/2026-02-11.md

âœ… Result

Users can now manage and edit strength templates on a dedicated page and quickly convert any past strength workout into a reusable template.

â¸»

ğŸ—“ 2026-02-11 Â· 20:12 (GMT+2)

ğŸ”¹ Request

User requested the ability to use presaved templates for strength workouts.

ğŸ”§ Changes Made
	â€¢	Added persistent SwiftData models for full strength workout templates and template exercises.
	â€¢	Extended `AddWorkoutView` with a new `Strength Templates` card for saving current strength exercises as templates.
	â€¢	Added a template library sheet to apply saved templates or delete templates.
	â€¢	Wired template application into workout drafting so templates prefill exercise entries for both manual and live strength flows.
	â€¢	Updated app schema and previews to include the new template models.

Files modified:
	â€¢	TrainState/Models/StrengthWorkoutTemplate.swift
	â€¢	TrainState/Views/AddWorkoutView.swift
	â€¢	TrainState/App/TrainStateApp.swift
	â€¢	TrainState/Views/AppRootView.swift
	â€¢	TrainState/Views/MainTabView.swift
	â€¢	changelogs/2026-02-11.md

âœ… Result

Users can now save and reuse full strength workout templates, reducing repetitive setup when logging common routines.

â¸»

ğŸ—“ 2026-02-11 Â· 19:56 (GMT+2)

ğŸ”¹ Request

User requested that `AddWorkoutView` should not scroll sideways.

ğŸ”§ Changes Made
	â€¢	Removed the horizontal quick-add chips `ScrollView(.horizontal)` from `AddWorkoutView`.
	â€¢	Replaced it with `WrappingHStackLayout` so chips wrap onto new lines within available width.
	â€¢	Preserved quick-add behavior and visual style while forcing vertical-only page scroll behavior.

Files modified:
	â€¢	TrainState/Views/AddWorkoutView.swift
	â€¢	changelogs/2026-02-11.md

âœ… Result

`AddWorkoutView` no longer requires sideways scrolling for quick-add chips and remains vertically scroll-focused.

â¸»

ğŸ—“ 2026-02-11 Â· 19:56 (GMT+2)

ğŸ”¹ Request

User requested `New Workout` to default to the most common workout type theyâ€™ve historically logged.

ğŸ”§ Changes Made
	â€¢	Added workout-history analysis in `AddWorkoutView` to compute the most common `WorkoutType`.
	â€¢	Applied the suggested type automatically on first `AddWorkoutView` appearance.
	â€¢	Added tie-break behavior using most recent workout date when type counts are equal.
	â€¢	Kept fallback behavior unchanged when no workout history exists.

Files modified:
	â€¢	TrainState/Views/AddWorkoutView.swift
	â€¢	changelogs/2026-02-11.md

âœ… Result

`New Workout` now opens with the userâ€™s most frequently logged workout type preselected, reducing taps for common flows.

â¸»

ğŸ—“ 2026-02-11 Â· 19:52 (GMT+2)

ğŸ”¹ Request

User requested more padding in the Live Activity UI.

ğŸ”§ Changes Made
	â€¢	Increased vertical and horizontal padding in Lock Screen Live Activity container.
	â€¢	Added extra spacing around Dynamic Island expanded bottom content.
	â€¢	Increased internal padding of Lock Screen content rows for a cleaner, less cramped layout.

Files modified:
	â€¢	TrainStateWidgetExtension/TrainStateWidgetExtensionLiveActivity.swift
	â€¢	changelogs/2026-02-11.md

âœ… Result

Live Activity now has more breathing room and improved visual comfort.

â¸»

ğŸ—“ 2026-02-11 Â· 19:45 (GMT+2)

ğŸ”¹ Request

User requested that in live logging, when an exercise is linked to a subcategory (e.g., Back), the parent category should be linked automatically on save.

ğŸ”§ Changes Made
	â€¢	Updated workout save mapping to auto-resolve subcategories from logged exercises.
	â€¢	Auto-derived parent categories from those resolved subcategories and merged them with any manually selected categories.
	â€¢	Applied this behavior to both regular save and live strength session save flows.

Files modified:
	â€¢	TrainState/Views/AddWorkoutView.swift
	â€¢	changelogs/2026-02-11.md

âœ… Result

When exercises are linked to subcategories during live logging, their parent categories are now automatically attached to the saved workout.

â¸»

ğŸ—“ 2026-02-11 Â· 19:37 (GMT+2)

ğŸ”¹ Request

User requested adding widget previews for the live workout Live Activity.

ğŸ”§ Changes Made
	â€¢	Added multiple `#Preview` states for the Live Activity widget to cover warmup, mid-session, and longer-session scenarios.
	â€¢	Updated preview labels to clearly reflect the simulated workout context.

Files modified:
	â€¢	TrainStateWidgetExtension/TrainStateWidgetExtensionLiveActivity.swift
	â€¢	changelogs/2026-02-11.md

âœ… Result

The widget extension now has richer previews, making it easier to iterate on Live Activity UI without running the full app flow each time.

â¸»

ğŸ—“ 2026-02-11 Â· 19:36 (GMT+2)

ğŸ”¹ Request

User requested that live workout reps/weight inputs use the same number picker interaction used previously in the app.

ğŸ”§ Changes Made
	â€¢	Replaced keyboard-based reps/weight text fields in live set logging with the existing metric picker pattern (tap-to-open, plus/minus, clear, haptics).
	â€¢	Added per-set metric editor sheet behavior for both `Reps` and `Weight (kg)` in the live exercise logger.
	â€¢	Kept set summary synchronization intact so existing save logic and workout summaries continue to work.

Files modified:
	â€¢	TrainState/Views/Components/LiveExerciseLoggerSheetView.swift
	â€¢	changelogs/2026-02-11.md

âœ… Result

Live set input now matches the appâ€™s established number picker UX, making reps/weight entry more consistent and faster than manual typing.

â¸»

ğŸ—“ 2026-02-11 Â· 19:35 (GMT+2)

ğŸ”¹ Request

User asked to make the new Live Activity design cleaner after initial implementation.

ğŸ”§ Changes Made
	â€¢	Refined Lock Screen Live Activity hierarchy for better scannability (status, timer, active exercise, exercise count).
	â€¢	Simplified Dynamic Island content to reduce visual noise and emphasize the most important live-state signals.
	â€¢	Updated iconography and spacing to create a cleaner visual rhythm while keeping all core live workout context visible.

Files modified:
	â€¢	TrainStateWidgetExtension/TrainStateWidgetExtensionLiveActivity.swift
	â€¢	changelogs/2026-02-11.md

âœ… Result

Live Activity presentation is now cleaner and easier to parse at a glance, with clearer emphasis on active status, elapsed time, and current exercise.

â¸»

ğŸ—“ 2026-02-11 Â· 19:27 (GMT+2)

ğŸ”¹ Request

User created the widget extension target and requested completion of Live Activity setup.

ğŸ”§ Changes Made
	â€¢	Replaced the default widget-extension template Live Activity with a workout-specific implementation.
	â€¢	Configured Lock Screen and Dynamic Island UIs to show live workout context (timer, exercise count, current exercise, workout label).
	â€¢	Simplified widget extension bundle to only include the Live Activity widget for this flow.
	â€¢	Removed unused template widget/control intent files to avoid unrelated UI artifacts in the extension.
	â€¢	Removed earlier temporary `TrainStateWidget/` files now superseded by the real `TrainStateWidgetExtension/` target.

Files modified:
	â€¢	TrainStateWidgetExtension/TrainStateWidgetExtensionLiveActivity.swift
	â€¢	TrainStateWidgetExtension/TrainStateWidgetExtensionBundle.swift
	â€¢	TrainStateWidgetExtension/AppIntent.swift (removed)
	â€¢	TrainStateWidgetExtension/TrainStateWidgetExtension.swift (removed)
	â€¢	TrainStateWidgetExtension/TrainStateWidgetExtensionControl.swift (removed)
	â€¢	TrainStateWidget/WorkoutLiveActivityWidget.swift (removed)
	â€¢	TrainStateWidget/TrainStateWidgetBundle.swift (removed)
	â€¢	changelogs/2026-02-11.md

âœ… Result

The new widget extension target is now aligned to the live workout use-case, with focused Live Activity presentation on Lock Screen and Dynamic Island.

â¸»

ğŸ—“ 2026-02-11 Â· 19:18 (GMT+2)

ğŸ”¹ Request

User approved implementing the Live Activity widget UI so active workouts are clearly visible on Lock Screen and Dynamic Island.

ğŸ”§ Changes Made
	â€¢	Added a dedicated ActivityKit + WidgetKit Live Activity widget implementation for workout sessions.
	â€¢	Implemented Lock Screen layout with workout name, active exercise, elapsed duration, and exercise count.
	â€¢	Implemented Dynamic Island layouts:
	â€¢	Expanded regions show live state, timer, and current exercise context.
	â€¢	Compact and minimal regions show concise workout indicators.
	â€¢	Added a widget bundle entry point containing the workout Live Activity widget.
	â€¢	Configured deep-link URL for quick return to live workout context from the Live Activity.
	â€¢	Confirmed current project has no widget extension target in `project.pbxproj`; code is prepared under `TrainStateWidget/` for immediate target wiring in Xcode.

Files modified:
	â€¢	TrainStateWidget/WorkoutLiveActivityWidget.swift
	â€¢	TrainStateWidget/TrainStateWidgetBundle.swift
	â€¢	changelogs/2026-02-11.md

âœ… Result

The Live Activity UI implementation is now in place for Lock Screen and Dynamic Island. Once the Widget Extension target is attached to these files, users will get a clear persistent visual reminder that a live workout is active.

â¸»

ğŸ—“ 2026-02-11 Â· 19:11 (GMT+2)

ğŸ”¹ Request

User requested a much smoother live workout logging flow: enter live mode, quickly choose an exercise (e.g., Bench Press), log per-set reps/weight (Set 1, Set 2, etc.), and keep a live workout indicator active.

ğŸ”§ Changes Made
	â€¢	Redesigned the live strength experience to prioritize â€œin-sessionâ€ logging with a clearer live state and faster add-exercise path.
	â€¢	Added a dedicated live exercise logger sheet focused on set-by-set input (reps + weight per set), including add/remove set actions.
	â€¢	Added quick exercise chips directly in live mode to speed up selecting common lifts.
	â€¢	Extended `ExerciseLogEntry` to support detailed per-set entries while preserving compatibility with existing set/reps/weight fields.
	â€¢	Updated workout save mapping to persist effective set metrics and store detailed per-set lines in exercise notes.
	â€¢	Integrated ActivityKit lifecycle management for live sessions (start/update/end) and enabled Live Activities in app configuration.

Files modified:
	â€¢	TrainState/Views/LiveStrengthSessionView.swift
	â€¢	TrainState/Views/Components/LiveExerciseLoggerSheetView.swift
	â€¢	TrainState/Models/ExerciseLogEntry.swift
	â€¢	TrainState/Views/AddWorkoutView.swift
	â€¢	TrainState/LiveActivity/WorkoutLiveActivityManager.swift
	â€¢	TrainState/Info.plist

âœ… Result

Live workout logging is now a clearer, faster flow built around real set-by-set input, with an active session indicator and Live Activity lifecycle integration to reduce accidental context loss during training.
