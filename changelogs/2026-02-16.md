ğŸ—“ 2026-02-16 Â· 20:08 (GMT+2)

ğŸ”¹ Request

User asked how to ensure all cards use the same radius and styling consistently.

ğŸ”§ Changes Made
	â€¢	Centralized card corner radius to a single design token: `ViewConstants.cardCornerRadius` (set to `32.0`).
	â€¢	Updated shared glass card API (`glassCard`) and modifier defaults to use `ViewConstants.cardCornerRadius`.
	â€¢	Updated shared `AppCardStyle` to use the same token for radius consistency.
	â€¢	Normalized card usage by removing explicit per-view `cornerRadius` arguments from `.glassCard(...)` call sites so cards inherit the shared default.
	â€¢	Aligned remaining outlier card usages (including live session and preview usages) with the shared default.

Files modified:
	â€¢	TrainState/Theme/ViewConstants.swift
	â€¢	TrainState/Views/Components/LiquidGlass.swift
	â€¢	TrainState/Theme/AppCardStyle.swift
	â€¢	Multiple view files using `.glassCard(...)`

âœ… Result

Card radius is now controlled from one place, and card corner consistency can be changed app-wide by updating a single token.

â¸»

ğŸ—“ 2026-02-16 Â· 19:58 (GMT+2)

ğŸ”¹ Request

User reported recap sharing image was oversized and requested the exported card match the in-app card exactly.

ğŸ”§ Changes Made
	â€¢	Removed fixed large export canvas sizing from recap image rendering.
	â€¢	Updated share snapshot to use the same visual structure and styling as the in-app `Weekly Recap` card.
	â€¢	Set share snapshot width to match in-app card width (`screen width - 32`) to align with Analytics horizontal padding.
	â€¢	Removed extra spacer/footer content that made the previous shared image feel oversized.

Files modified:
	â€¢	TrainState/Views/AnalyticsView.swift

âœ… Result

Shared recap images now closely match the on-screen recap card proportions and appearance.

â¸»

ğŸ—“ 2026-02-16 Â· 19:49 (GMT+2)

ğŸ”¹ Request

User requested the shareable recap card use the right aspect ratio and only be as wide as needed.

ğŸ”§ Changes Made
	â€¢	Changed recap image export to a fixed 4:5 canvas (`1080x1350`) for social-friendly proportions.
	â€¢	Reworked the share snapshot into a bounded card canvas with internal padding instead of wide outer padding.
	â€¢	Removed extra export background/padding that previously made shared images wider than necessary.

Files modified:
	â€¢	TrainState/Views/AnalyticsView.swift

âœ… Result

Shared recap images now export at a clean 4:5 ratio and no longer include unnecessary extra width.

â¸»

ğŸ—“ 2026-02-16 Â· 19:42 (GMT+2)

ğŸ”¹ Request

User requested that premium override can be turned off in a way that disables premium even when premium is currently active.

ğŸ”§ Changes Made
	â€¢	Added a new debug state in `PurchaseManager` (`debugPremiumForceDisabled`) with persisted `UserDefaults` storage.
	â€¢	Updated `hasActiveSubscription` to return `false` when force-disabled mode is enabled, before checking normal entitlements.
	â€¢	Added `setPremiumForceDisabled(_:)` API and made debug premium modes mutually exclusive:
	â€¢	Enabling premium override turns force-disabled off.
	â€¢	Enabling force-disabled turns premium override off.
	â€¢	Added a new `Force Premium Off` toggle in `DeveloperOptionsView` with status messaging.
	â€¢	Updated developer note text to clarify mutual exclusivity.

Files modified:
	â€¢	TrainState/Managers/PurchaseManager.swift
	â€¢	TrainState/Views/DeveloperOptionsView.swift

âœ… Result

Developer Settings now supports forcing premium OFF for testing, even if StoreKit/RevenueCat currently reports an active premium entitlement.

â¸»

ğŸ—“ 2026-02-16 Â· 19:36 (GMT+2)

ğŸ”¹ Request

User requested recap sharing to send the actual visual card (image), not text.

ğŸ”§ Changes Made
	â€¢	Replaced recap text sharing with image-based sharing in `AnalyticsView`.
	â€¢	Added `ImageRenderer`-based card snapshot generation for the weekly recap hero card.
	â€¢	Added a `Transferable` PNG payload (`WeeklyRecapShareImage`) so `ShareLink` exports an actual image file.
	â€¢	Added share preview image handling so the iOS share sheet displays the recap card visually.

Files modified:
	â€¢	TrainState/Views/AnalyticsView.swift

âœ… Result

Tapping share now exports and shares a real weekly recap card image (PNG) instead of plain text.

â¸»

ğŸ—“ 2026-02-16 Â· 19:31 (GMT+2)

ğŸ”¹ Request

User requested the ability to turn premium off directly from Developer Settings.

ğŸ”§ Changes Made
	â€¢	Added a dedicated `Turn Premium Override Off` action in `DeveloperOptionsView` when debug premium override is enabled.
	â€¢	Kept the existing debug premium toggle and clarified behavior with a note explaining that turning override off restores normal entitlement checks.
	â€¢	Retained current premium-active status messaging for quick verification.

Files modified:
	â€¢	TrainState/Views/DeveloperOptionsView.swift

âœ… Result

Developer Settings now provides an explicit, one-tap way to disable premium override during testing.

â¸»

ğŸ—“ 2026-02-16 Â· 19:24 (GMT+2)

ğŸ”¹ Request

User requested a cool shareable recap card and full-width layout for all cards on the Analytics view.

ğŸ”§ Changes Made
	â€¢	Redesigned `Weekly Recap` into a share-focused hero card with gradient styling and higher-contrast typography.
	â€¢	Added native `ShareLink` action to the recap card for quick sharing of weekly stats.
	â€¢	Added share-ready metric pills inside the recap card (workouts, minutes, streak).
	â€¢	Enforced full-width behavior across Analytics cards by explicitly applying `.frame(maxWidth: .infinity, alignment: .leading)` to each card container.

Files modified:
	â€¢	TrainState/Views/AnalyticsView.swift

âœ… Result

The recap now feels more premium and shareable, and all Analytics cards render consistently at full width.

â¸»

ğŸ—“ 2026-02-16 Â· 19:14 (GMT+2)

ğŸ”¹ Request

User requested implementation of the retention feature set focused on recurring value (weekly recap, forecasts, guidance, persistent surfaces).

ğŸ”§ Changes Made
	â€¢	Added a new `Weekly Recap` card in `AnalyticsView` with dynamic headline and weekly metric pills (workouts, minutes, streak).
	â€¢	Extended `Weekly Goals` with forecast outputs for remaining workouts/minutes per day needed to hit this weekâ€™s goals.
	â€¢	Added a `Next Session Guidance` card to provide action-oriented recommendations based on near-PR opportunities, recent training gaps, and weekly goal deficit.
	â€¢	Added an `Always-On Surfaces` card with status and guidance for HealthKit-linked workouts, reminders, and live session usage.
	â€¢	Added supporting analytics helpers for recap text, days-left pacing, HealthKit-linked counts, and guidance synthesis.
	â€¢	Marked section 4 items in `APP_GROWTH_PREMIUM_ROADMAP.md` as completed.

Files modified:
	â€¢	TrainState/Views/AnalyticsView.swift
	â€¢	APP_GROWTH_PREMIUM_ROADMAP.md

âœ… Result

Analytics now delivers recurring weekly value and concrete next actions, while making retention surfaces and setup status visible in-app.

â¸»

ğŸ—“ 2026-02-16 Â· 18:58 (GMT+2)

ğŸ”¹ Request

User requested implementation of step 4 from the roadmap execution order (first-3-day onboarding improvements).

ğŸ”§ Changes Made
	â€¢	Enhanced onboarding final step to collect `Primary Goal` and `Training Style` selections.
	â€¢	Persisted onboarding selections using `@AppStorage` and mapped selected goals to weekly goal defaults.
	â€¢	Added starter strength template preloading on onboarding completion when no templates exist, with templates tailored by selected goal.
	â€¢	Added a `First Session Checklist` card in `WorkoutListView` with status for:
	â€¢	Log first workout
	â€¢	Set weekly goal
	â€¢	Enable reminders
	â€¢	Added reminder permission request action from checklist and synced permission status on view appearance.
	â€¢	Marked section 6 items in `APP_GROWTH_PREMIUM_ROADMAP.md` as completed.

Files modified:
	â€¢	TrainState/Views/OnboardingView.swift
	â€¢	TrainState/Views/WorkoutListView.swift
	â€¢	APP_GROWTH_PREMIUM_ROADMAP.md

âœ… Result

New users now get personalized onboarding setup, immediate starter templates, and a clear first-session completion path to improve early retention.

â¸»

ğŸ—“ 2026-02-16 Â· 18:38 (GMT+2)

ğŸ”¹ Request

User requested that attaching a HealthKit workout to an existing workout should also transfer start time and duration.

ğŸ”§ Changes Made
	â€¢	Updated `HealthKitRecentWorkoutImporter.attachWorkout` to always sync `startDate` and `duration` from the selected HealthKit workout.
	â€¢	Kept existing behavior for other metrics to fill only missing values (distance, calories, rating) to avoid unnecessary overrides.
	â€¢	Updated method documentation to reflect the new attach behavior.

Files modified:
	â€¢	TrainState/Services/HealthKitRecentWorkoutImporter.swift

âœ… Result

Attached workouts now inherit HealthKit timing data directly, ensuring the existing workout record matches the source session time and duration.

â¸»

ğŸ—“ 2026-02-16 Â· 18:31 (GMT+2)

ğŸ”¹ Request

User requested a further visual upgrade to make the post-log banner feel nicer.

ğŸ”§ Changes Made
	â€¢	Refactored the success banner from a single text line to a structured achievement toast model with title, subtitle, and metrics.
	â€¢	Added compact metric pills for weekly workout count and streak days.
	â€¢	Updated iconography to a celebratory symbol and improved typography hierarchy for clearer readability.
	â€¢	Kept native `safeAreaInset` and material styling while improving information density and polish.

Files modified:
	â€¢	TrainState/Views/WorkoutListView.swift

âœ… Result

Post-log feedback now feels more premium and informative, with clearer visual hierarchy and stronger motivational framing.

â¸»

ğŸ—“ 2026-02-16 Â· 18:23 (GMT+2)

ğŸ”¹ Request

User requested a nicer, more native SwiftUI style for the post-log success banner.

ğŸ”§ Changes Made
	â€¢	Replaced the top `overlay` capsule banner in `WorkoutListView` with a `safeAreaInset` presentation for a more native top notice behavior.
	â€¢	Redesigned banner visuals to use `ultraThinMaterial`, rounded rectangle container, subtle border, and soft shadow.
	â€¢	Added an icon-led layout and improved text hierarchy for clearer scanability.
	â€¢	Replaced `DispatchQueue` delay dismissal with a cancellable `Task.sleep` flow to avoid banner timing conflicts on rapid successive saves.

Files modified:
	â€¢	TrainState/Views/WorkoutListView.swift

âœ… Result

Post-log feedback now appears with smoother native motion and system-consistent styling, while remaining stable under rapid updates.

â¸»

ğŸ—“ 2026-02-16 Â· 18:14 (GMT+2)

ğŸ”¹ Request

User asked to warn before saving when a workout of the same type already exists on the same day.

ğŸ”§ Changes Made
	â€¢	Added duplicate-detection logic in `AddWorkoutView` for same workout type on the same calendar day.
	â€¢	Introduced a confirmation alert with `Cancel` and `Save Anyway` actions before persisting duplicate-day entries.
	â€¢	Updated normal save, quick-log save, and strength-session save flows to use shared guarded save logic.
	â€¢	Ensured template persistence only happens after duplicate confirmation, not before.

Files modified:
	â€¢	TrainState/Views/AddWorkoutView.swift

âœ… Result

Users now get a warning before creating duplicate same-day workout types, while still having the option to save intentionally.

â¸»

ğŸ—“ 2026-02-16 Â· 18:02 (GMT+2)

ğŸ”¹ Request

User asked to start implementing item 1 from the growth roadmap: improve the core habit loop to drive more usage.

ğŸ”§ Changes Made
	â€¢	Added a new one-tap `Quick Log` presets card in `AddWorkoutView` for common sessions (Strength, Run, Cycle, Yoga) to reduce input friction.
	â€¢	Added a post-log success banner in `WorkoutListView` that surfaces weekly workout count and current day streak after a new workout is logged.
	â€¢	Extended `NotificationManager` with routine-based reminder scheduling that predicts the next likely workout window from recent workout dates and schedules a one-time consistency nudge.
	â€¢	Wired reminder refresh into successful workout saves so reminder timing adapts as user behavior changes.
	â€¢	Marked all checklist items in section 1 of `APP_GROWTH_PREMIUM_ROADMAP.md` as completed.

Files modified:
	â€¢	TrainState/Views/AddWorkoutView.swift
	â€¢	TrainState/Views/WorkoutListView.swift
	â€¢	TrainState/Managers/NotificationManager.swift
	â€¢	APP_GROWTH_PREMIUM_ROADMAP.md

âœ… Result

The app now supports much faster common workout logging, immediate positive feedback after saves, and adaptive reminder nudges aligned to user workout rhythm.

â¸»

ğŸ—“ 2026-02-16 Â· 17:36 (GMT+2)

ğŸ”¹ Request

User asked to convert growth and premium optimization recommendations into a Markdown file so implementation can start one item at a time.

ğŸ”§ Changes Made
	â€¢	Created a new roadmap file with prioritized growth and premium initiatives.
	â€¢	Structured each initiative as a checklist with success metrics for measurable execution.
	â€¢	Added a recommended execution order to support sequential implementation.

Files modified:
	â€¢	APP_GROWTH_PREMIUM_ROADMAP.md

âœ… Result

The project now has a clear, actionable implementation roadmap for improving user adoption and premium conversion in iterative steps.

â¸»

ğŸ—“ 2026-02-16 Â· 17:21 (GMT+2)

ğŸ”¹ Request

User requested the in-app review prompt to happen only once after 3 workouts, with manual review options available elsewhere in the app.

ğŸ”§ Changes Made
	â€¢	Updated review prompt logic to trigger only once after the 3rd successfully saved workout.
	â€¢	Removed milestone-based repeat prompt retries and cooldown logic.
	â€¢	Added a persistent â€œRate TrainStateâ€ card at the bottom of the workouts list view (including empty-state screen).
	â€¢	Added a â€œRate TrainStateâ€ action in Settings under Premium.
	â€¢	Connected both manual actions to the App Store write-review page for app ID `6747159475`.

Files modified:
	â€¢	TrainState/Views/AddWorkoutView.swift
	â€¢	TrainState/Views/WorkoutListView.swift
	â€¢	TrainState/Views/SettingsView.swift

âœ… Result

Users get one contextual review prompt at workout #3, then can rate manually anytime from the workouts screen footer or Settings.

â¸»

ğŸ—“ 2026-02-16 Â· 17:08 (GMT+2)

ğŸ”¹ Request

User requested App Store review prompting after the 3rd logged workout, with guidance on what to do if they dismiss and do not leave a rating.

ğŸ”§ Changes Made
	â€¢	Added in-app review prompt tracking to `AddWorkoutView` using persisted `@AppStorage` counters.
	â€¢	Triggered the first review prompt at the 3rd successfully saved workout.
	â€¢	Implemented retry milestones for later prompts at workout counts 8, 15, and 25.
	â€¢	Added a 21-day cooldown between prompt attempts to avoid over-prompting if users dismiss.

Files modified:
	â€¢	TrainState/Views/AddWorkoutView.swift

âœ… Result

Review prompting now starts after workout #3 and retries later with spaced, milestone-based attempts when users do not review immediately.

â¸»

ğŸ—“ 2026-02-16 Â· 16:20 (GMT+2)

ğŸ”¹ Request

User reported that cards were not adapting correctly in dark mode, causing poor contrast and unreadable content.

ğŸ”§ Changes Made
	â€¢	Updated shared `glassCard` styling to use adaptive system backgrounds instead of a hardcoded white card surface.
	â€¢	Added dark-mode-aware border and shadow tuning in the shared card modifiers for better separation without washing out text.
	â€¢	Updated `ExerciseCardView` to default to the environment color scheme instead of forcing light mode when no override is provided.
	â€¢	Adjusted exercise card background colors to semantic system surfaces for consistent readability in both light and dark mode.

Files modified:
	â€¢	TrainState/Views/Components/LiquidGlass.swift
	â€¢	TrainState/Theme/AppCardStyle.swift
	â€¢	TrainState/Views/Components/ExerciseCardView.swift

âœ… Result

Cards now adapt to light and dark mode correctly, and card content remains readable with proper foreground/background contrast across shared card surfaces.
